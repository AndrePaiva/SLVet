(function(e,t,n){var r=function(r,i){"use strict";var s=function(e,t){if(!(this instanceof s)){throw"Warning: AutoFill must be initialised with the keyword 'new'"}if(!r.fn.dataTableExt.fnVersionCheck("1.7.0")){throw"Warning: AutoFill requires DataTables 1.7 or greater"}this.c={};this.s={filler:{height:0,width:0},border:{width:2},drag:{startX:-1,startY:-1,startTd:null,endTd:null,dragging:false},screen:{interval:null,y:0,height:0,scrollTop:0},scroller:{top:0,bottom:0},columns:[]};this.dom={table:null,filler:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,currentTarget:null};this.fnSettings=function(){return this.s};this._fnInit(e,t);return this};s.prototype={_fnInit:function(e,n){var o=this,u,a;this.s.dt=i.Api?(new i.Api(e)).settings()[0]:e.fnSettings();this.s.init=n||{};this.dom.table=this.s.dt.nTable;r.extend(true,this.c,s.defaults,n);this._initColumns();var f=r("<div/>",{"class":"AutoFill_filler"}).appendTo("body");this.dom.filler=f[0];this.s.filler.height=f.height();this.s.filler.width=f.width();f[0].style.display="none";var l;var c=t.body;if(o.s.dt.oScroll.sY!==""){o.s.dt.nTable.parentNode.style.position="relative";c=o.s.dt.nTable.parentNode}l=r("<div/>",{"class":"AutoFill_border"});this.dom.borderTop=l.clone().appendTo(c)[0];this.dom.borderRight=l.clone().appendTo(c)[0];this.dom.borderBottom=l.clone().appendTo(c)[0];this.dom.borderLeft=l.clone().appendTo(c)[0];f.on("mousedown.DTAF",function(e){this.onselectstart=function(){return false};o._fnFillerDragStart.call(o,e);return false});r("tbody",this.dom.table).on("mouseover.DTAF mouseout.DTAF",">tr>td, >tr>th",function(e){o._fnFillerDisplay.call(o,e)});r(this.dom.table).on("destroy.dt.DTAF",function(){f.off("mousedown.DTAF").remove();r("tbody",this.dom.table).off("mouseover.DTAF mouseout.DTAF")})},_initColumns:function(){var e=this;var t,n;var i=this.s.dt;var o=this.s.init;for(t=0,n=i.aoColumns.length;t<n;t++){this.s.columns[t]=r.extend(true,{},s.defaults.column)}i.oApi._fnApplyColumnDefs(i,o.aoColumnDefs||o.columnDefs,o.aoColumns||o.columns,function(t,n){e._fnColumnOptions(t,n)});for(t=0,n=i.aoColumns.length;t<n;t++){var u=this.s.columns[t];if(!u.read){u.read=this._fnReadCell}if(!u.write){u.read=this._fnWriteCell}if(!u.step){u.read=this._fnStep}}},_fnColumnOptions:function(e,t){var r=this.s.columns[e];var i=function(e,i){if(t[i[0]]!==n){r[e]=t[i[0]]}if(t[i[1]]!==n){r[e]=t[i[1]]}};i("enable",["bEnable","enable"]);i("read",["fnRead","read"]);i("write",["fnWrite","write"]);i("step",["fnStep","step"]);i("increment",["bIncrement","increment"])},_fnTargetCoords:function(e){var t=r(e).parents("tr")[0];var n=this.s.dt.oInstance.fnGetPosition(e);return{x:r("td",t).index(e),y:r("tr",t.parentNode).index(t),row:n[0],column:n[2]}},_fnUpdateBorder:function(e,t){var n=this.s.border.width,i=r(e).offset(),s=r(t).offset(),o=i.left-n,u=s.left+r(t).outerWidth(),a=i.top-n,f=s.top+r(t).outerHeight(),l=s.left+r(t).outerWidth()-i.left+2*n,c=s.top+r(t).outerHeight()-i.top+2*n,h;if(i.left>s.left){o=s.left-n;u=i.left+r(e).outerWidth();l=i.left+r(e).outerWidth()-s.left+2*n}if(this.s.dt.oScroll.sY!==""){var p=r(this.s.dt.nTable.parentNode).offset(),d=r(this.s.dt.nTable.parentNode).scrollTop(),v=r(this.s.dt.nTable.parentNode).scrollLeft();o-=p.left-v;u-=p.left-v;a-=p.top-d;f-=p.top-d}h=this.dom.borderTop.style;h.top=a+"px";h.left=o+"px";h.height=this.s.border.width+"px";h.width=l+"px";h=this.dom.borderBottom.style;h.top=f+"px";h.left=o+"px";h.height=this.s.border.width+"px";h.width=l+"px";h=this.dom.borderLeft.style;h.top=a+"px";h.left=o+"px";h.height=c+"px";h.width=this.s.border.width+"px";h=this.dom.borderRight.style;h.top=a+"px";h.left=u+"px";h.height=c+"px";h.width=this.s.border.width+"px"},_fnFillerDragStart:function(n){var i=this;var s=this.dom.currentTarget;this.s.drag.dragging=true;i.dom.borderTop.style.display="block";i.dom.borderRight.style.display="block";i.dom.borderBottom.style.display="block";i.dom.borderLeft.style.display="block";var o=this._fnTargetCoords(s);this.s.drag.startX=o.x;this.s.drag.startY=o.y;this.s.drag.startTd=s;this.s.drag.endTd=s;this._fnUpdateBorder(s,s);r(t).bind("mousemove.AutoFill",function(e){i._fnFillerDragMove.call(i,e)});r(t).bind("mouseup.AutoFill",function(e){i._fnFillerFinish.call(i,e)});this.s.screen.y=n.pageY;this.s.screen.height=r(e).height();this.s.screen.scrollTop=r(t).scrollTop();if(this.s.dt.oScroll.sY!==""){this.s.scroller.top=r(this.s.dt.nTable.parentNode).offset().top;this.s.scroller.bottom=this.s.scroller.top+r(this.s.dt.nTable.parentNode).height()}this.s.screen.interval=setInterval(function(){var e=r(t).scrollTop();var n=e-i.s.screen.scrollTop;i.s.screen.y+=n;if(i.s.screen.height-i.s.screen.y+e<50){r("html, body").animate({scrollTop:e+50},240,"linear")}else if(i.s.screen.y-e<50){r("html, body").animate({scrollTop:e-50},240,"linear")}if(i.s.dt.oScroll.sY!==""){if(i.s.screen.y>i.s.scroller.bottom-50){r(i.s.dt.nTable.parentNode).animate({scrollTop:r(i.s.dt.nTable.parentNode).scrollTop()+50},240,"linear")}else if(i.s.screen.y<i.s.scroller.top+50){r(i.s.dt.nTable.parentNode).animate({scrollTop:r(i.s.dt.nTable.parentNode).scrollTop()-50},240,"linear")}}},250)},_fnFillerDragMove:function(e){if(e.target&&e.target.nodeName.toUpperCase()=="TD"&&e.target!=this.s.drag.endTd){var n=this._fnTargetCoords(e.target);if(this.c.mode=="y"&&n.x!=this.s.drag.startX){e.target=r("tbody>tr:eq("+n.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]}if(this.c.mode=="x"&&n.y!=this.s.drag.startY){e.target=r("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+n.x+")",this.dom.table)[0]}if(this.c.mode=="either"){if(n.x!=this.s.drag.startX){e.target=r("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+n.x+")",this.dom.table)[0]}else if(n.y!=this.s.drag.startY){e.target=r("tbody>tr:eq("+n.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]}}if(this.c.mode!=="both"){n=this._fnTargetCoords(e.target)}var i=this.s.drag;i.endTd=e.target;if(n.y>=this.s.drag.startY){this._fnUpdateBorder(i.startTd,i.endTd)}else{this._fnUpdateBorder(i.endTd,i.startTd)}this._fnFillerPosition(e.target)}this.s.screen.y=e.pageY;this.s.screen.scrollTop=r(t).scrollTop();if(this.s.dt.oScroll.sY!==""){this.s.scroller.scrollTop=r(this.s.dt.nTable.parentNode).scrollTop();this.s.scroller.top=r(this.s.dt.nTable.parentNode).offset().top;this.s.scroller.bottom=this.s.scroller.top+r(this.s.dt.nTable.parentNode).height()}},_fnFillerFinish:function(e){var n=this,s,o,u;r(t).unbind("mousemove.AutoFill mouseup.AutoFill");this.dom.borderTop.style.display="none";this.dom.borderRight.style.display="none";this.dom.borderBottom.style.display="none";this.dom.borderLeft.style.display="none";this.s.drag.dragging=false;clearInterval(this.s.screen.interval);var a=[];var f=this.dom.table;var l=this._fnTargetCoords(this.s.drag.startTd);var c=this._fnTargetCoords(this.s.drag.endTd);var h=function(e){return n.s.dt.oApi._fnVisibleToColumnIndex(n.s.dt,e)};if(l.y<=c.y){for(s=l.y;s<=c.y;s++){if(l.x<=c.x){for(u=l.x;u<=c.x;u++){a.push({node:r("tbody>tr:eq("+s+")>td:eq("+u+")",f)[0],x:u-l.x,y:s-l.y,colIdx:h(u)})}}else{for(u=l.x;u>=c.x;u--){a.push({node:r("tbody>tr:eq("+s+")>td:eq("+u+")",f)[0],x:u-l.x,y:s-l.y,colIdx:h(u)})}}}}else{for(s=l.y;s>=c.y;s--){if(l.x<=c.x){for(u=l.x;u<=c.x;u++){a.push({node:r("tbody>tr:eq("+s+")>td:eq("+u+")",f)[0],x:u-l.x,y:s-l.y,colIdx:h(u)})}}else{for(u=l.x;u>=c.x;u--){a.push({node:r("tbody>tr:eq("+s+")>td:eq("+u+")",f)[0],x:l.x-u,y:l.y-s,colIdx:h(u)})}}}}if(a.length<=1){return}var p=[];var d;for(s=0,o=a.length;s<o;s++){var v=a[s];var m=this.s.columns[v.colIdx];var g=m.read.call(m,v.node);var y=m.step.call(m,v.node,g,d,s,v.x,v.y);m.write.call(m,v.node,y);d=y;p.push({cell:v,colIdx:v.colIdx,newValue:y,oldValue:g})}if(this.c.complete!==null){this.c.complete.call(this,p)}if(i.Api){(new i.Api(this.s.dt)).draw(false)}else{this.s.dt.oInstance.fnDraw()}},_fnFillerDisplay:function(e){var t=this.dom.filler;if(this.s.drag.dragging){return}var n=e.target.nodeName.toLowerCase()=="td"?e.target:r(e.target).parents("td")[0];var i=this._fnTargetCoords(n).column;if(!this.s.columns[i].enable){t.style.display="none";return}if(e.type=="mouseover"){this.dom.currentTarget=n;this._fnFillerPosition(n);t.style.display="block"}else if(!e.relatedTarget||!e.relatedTarget.className.match(/AutoFill/)){t.style.display="none"}},_fnFillerPosition:function(e){var t=r(e).offset();var n=this.dom.filler;n.style.top=t.top-this.s.filler.height/2-1+r(e).outerHeight()+"px";n.style.left=t.left-this.s.filler.width/2-1+r(e).outerWidth()+"px"}};i.AutoFill=s;i.AutoFill=s;s.version="1.2.0";s.defaults={mode:"y",complete:null,column:{enable:true,increment:true,read:function(e){return r(e).html()},write:function(e,t){var n=r(e).parents("table");if(i.Api){n.DataTable().cell(e).data(t)}else{var s=n.dataTable();var o=s.fnGetPosition(e);s.fnUpdate(t,o[0],o[2],false)}},step:function(e,t,r,i,s,o){var u=/(\-?\d+)/;var a=this.increment&&r?r.match(u):null;if(a){return r.replace(u,parseInt(a[1],10)+(s<0||o<0?-1:1))}return r===n?t:r}}};return s};if(typeof define==="function"&&define.amd){define("datatables-autofill",["jquery","datatables"],r)}else if(jQuery&&!jQuery.fn.dataTable.AutoFill){r(jQuery,jQuery.fn.dataTable)}})(window,document)