var KeyTable;(function(e,t,n){var r=function(r,i){"use strict";KeyTable=function(i){function g(e){return function(t,n,r){if((t===null||typeof t=="number")&&(n===null||typeof n=="number")&&typeof r=="function"){w(e,t,n,r)}else if(typeof t=="object"&&typeof n=="function"){var i=M(t);w(e,i[0],i[1],n)}else{alert("Unhandable event type was added: x"+t+"  y:"+n+"  z:"+r)}}}function y(e){return function(t,n,r){if((t===null||typeof arguments[0]=="number")&&(n===null||typeof arguments[1]=="number")){if(typeof arguments[2]=="function"){E(e,t,n,r)}else{E(e,t,n)}}else if(typeof arguments[0]=="object"){var i=M(t);if(typeof arguments[1]=="function"){E(e,i[0],i[1],n)}else{E(e,i[0],i[1])}}else{alert("Unhandable event type was removed: x"+t+"  y:"+n+"  z:"+r)}}}function w(e,t,n,r){h[e].push({x:t,y:n,fn:r})}function E(e,t,n,r){var i=0;for(var s=0,o=h[e].length;s<o-i;s++){if(typeof r!="undefined"){if(h[e][s-i].x==t&&h[e][s-i].y==n&&h[e][s-i].fn==r){h[e].splice(s-i,1);i++}}else{if(h[e][s-i].x==t&&h[e][s-i].y==n){h[e].splice(s,1);return 1}}}return i}function S(e,t,n){var r=0;var i=h[e];for(var s=0;s<i.length;s++){if(i[s].x==t&&i[s].y==n||i[s].x===null&&i[s].y==n||i[s].x==t&&i[s].y===null||i[s].x===null&&i[s].y===null){i[s].fn(O(t,n),t,n);r++}}return r}function x(n,i){if(o==n){return}if(typeof i=="undefined"){i=true}if(o!==null){N(o)}r(n).addClass(l);r(n).parent().addClass(l);var s;if(p){s=p;var f=H(n)[1];var h=c;while(f>=s.fnDisplayEnd()){if(s._iDisplayLength>=0){if(s._iDisplayStart+s._iDisplayLength<s.fnRecordsDisplay()){s._iDisplayStart+=s._iDisplayLength}}else{s._iDisplayStart=0}p.oApi._fnCalculateEnd(s)}while(f<s._iDisplayStart){s._iDisplayStart=s._iDisplayLength>=0?s._iDisplayStart-s._iDisplayLength:0;if(s._iDisplayStart<0){s._iDisplayStart=0}p.oApi._fnCalculateEnd(s)}p.oApi._fnDraw(s);c=h}var d=M(n);o=n;u=d[0];a=d[1];var v,m,g,y,b,w,E;if(i){v=r(e).height();m=r(e).width();g=r(t).scrollTop();y=r(t).scrollLeft();b=n.offsetHeight;w=n.offsetWidth;E=P(n);if(p&&typeof s.oScroll!="undefined"&&(s.oScroll.sX!==""||s.oScroll.sY!=="")){E[1]-=r(s.nTable.parentNode).scrollTop();E[0]-=r(s.nTable.parentNode).scrollLeft()}if(E[1]+b>g+v){_(E[1]+b-v)}else if(E[1]<g){_(E[1])}if(E[0]+w>y+m){D(E[0]+w-m)}else if(E[0]<y){D(E[0])}}if(p&&typeof s.oScroll!="undefined"&&(s.oScroll.sX!==""||s.oScroll.sY!=="")){var x=s.nTable.parentNode;v=x.clientHeight;m=x.clientWidth;g=x.scrollTop;y=x.scrollLeft;b=n.offsetHeight;w=n.offsetWidth;if(n.offsetTop+b>v+g){x.scrollTop=n.offsetTop+b-v}else if(n.offsetTop<g){x.scrollTop=n.offsetTop}if(n.offsetLeft+w>m+y){x.scrollLeft=n.offsetLeft+w-m}else if(n.offsetLeft<y){x.scrollLeft=n.offsetLeft}}L();S("focus",u,a)}function T(){N(o);u=null;a=null;o=null;A()}function N(e){r(e).removeClass(l);r(e).parent().removeClass(l);S("blur",u,a)}function C(e){var t=this;while(t.nodeName!="TD"){t=t.parentNode}x(t);L()}function k(e){if(f.block||!c){return true}if(e.metaKey||e.altKey||e.ctrlKey){return true}var t,n,r=s.getElementsByTagName("tr")[0].getElementsByTagName("td").length,i;if(p){i=p.aiDisplay.length;var l=H(o);if(l===null){return}u=l[0];a=l[1]}else{i=s.getElementsByTagName("tr").length}var h=e.keyCode==9&&e.shiftKey?-1:e.keyCode;switch(h){case 13:e.preventDefault();e.stopPropagation();S("action",u,a);return true;case 27:if(!S("esc",u,a)){T();return}t=u;n=a;break;case-1:case 37:if(u>0){t=u-1;n=a}else if(a>0){t=r-1;n=a-1}else{if(h==-1&&d){m=true;v.focus();setTimeout(function(){m=false},0);c=false;T();return true}else{return false}}break;case 38:if(a>0){t=u;n=a-1}else{return false}break;case 36:t=u;n=0;break;case 33:t=u;n=a-10;if(n<0){n=0}break;case 9:case 39:if(u<r-1){t=u+1;n=a}else if(a<i-1){t=0;n=a+1}else{if(h==9&&d){m=true;v.focus();setTimeout(function(){m=false},0);c=false;T();return true}else{return false}}break;case 40:if(a<i-1){t=u;n=a+1}else{return false}break;case 35:t=u;n=i-1;break;case 34:t=u;n=a+10;if(n>i-1){n=i-1}break;default:return true}x(O(t,n));return false}function L(){if(!c){c=true}}function A(){c=false}function O(e,t){if(p){if(typeof p.aoData[p.aiDisplay[t]]!="undefined"){return p.aoData[p.aiDisplay[t]].nTr.getElementsByTagName("td")[e]}else{return null}}else{return r("tr:eq("+t+")>td:eq("+e+")",s)[0]}}function M(e){if(p){return[r("td",e.parentNode).index(e),r("tr",e.parentNode.parentNode).index(e.parentNode)+p._iDisplayStart]}else{return[r("td",e.parentNode).index(e),r("tr",e.parentNode.parentNode).index(e.parentNode)]}}function _(e){t.documentElement.scrollTop=e;t.body.scrollTop=e}function D(e){t.documentElement.scrollLeft=e;t.body.scrollLeft=e}function P(e){var t=0;var n=0;if(e.offsetParent){t=e.offsetLeft;n=e.offsetTop;e=e.offsetParent;while(e){t+=e.offsetLeft;n+=e.offsetTop;e=e.offsetParent}}return[t,n]}function H(e){for(var t=0,n=p.aiDisplay.length;t<n;t++){var r=p.aoData[p.aiDisplay[t]].nTr;var i=r.getElementsByTagName("td");for(var s=0,o=i.length;s<o;s++){if(i[s]==e){return[s,t]}}}return null}function B(e,n,i,o){f=o;if(typeof i=="undefined"){i={}}if(typeof i.focus=="undefined"){i.focus=[0,0]}i.table=e;r(i.table).addClass("KeyTable");if(typeof i.focusClass!="undefined"){l=i.focusClass}if(typeof n!="undefined"){p=n}if(typeof i.initScroll=="undefined"){i.initScroll=true}if(typeof i.form=="undefined"){i.form=false}d=i.form;s=i.table.getElementsByTagName("tbody")[0];if(d){var u=t.createElement("div");v=t.createElement("input");u.style.height="1px";u.style.width="0px";u.style.overflow="hidden";if(typeof i.tabIndex!="undefined"){v.tabIndex=i.tabIndex}u.appendChild(v);i.table.parentNode.insertBefore(u,i.table.nextSibling);r(v).focus(function(){if(!m){c=true;m=false;if(typeof i.focus.nodeName!="undefined"){x(i.focus,i.initScroll)}else{x(O(i.focus[0],i.focus[1]),i.initScroll)}setTimeout(function(){v.blur()},0)}});c=false}else{if(typeof i.focus.nodeName!="undefined"){x(i.focus,i.initScroll)}else{x(O(i.focus[0],i.focus[1]),i.initScroll)}L()}r(t).bind("keydown",k);if(p){r(p.nTable).on("click","td",C)}else{r(s).on("click","td",C)}r(t).click(function(e){var t=e.target;var n=false;while(t){if(t==i.table){n=true;break}t=t.parentNode}if(!n){T()}})}this.block=false;this.event={remove:{}};this.fnGetCurrentPosition=function(){return[u,a]};this.fnGetCurrentData=function(){return o.innerHTML};this.fnGetCurrentTD=function(){return o};this.fnSetPosition=function(e,t){if(typeof e=="object"&&e.nodeName){x(e)}else{x(O(e,t))}};this.fnBlur=function(){T()};var s=null;var o=null;var u=null;var a=null;var f=null;var l="focus";var c=false;var h={action:[],esc:[],focus:[],blur:[]};var p=null;var d;var v;var m=false;for(var b in h){if(b){this.event[b]=g(b);this.event.remove[b]=y(b)}}var j,F;if(i===n){j=r("table.KeyTable")[0];F=null}else if(r.isPlainObject(i)){j=i.table;F=i.datatable}else{F=(new r.fn.dataTable.Api(i)).settings()[0];j=F.nTable}B(j,F,i,this)};KeyTable.version="1.2.0";r.fn.dataTable.KeyTable=KeyTable;r.fn.DataTable.KeyTable=KeyTable;return KeyTable};if(typeof define==="function"&&define.amd){define("datatables-keytable",["jquery","datatables"],r)}else if(jQuery&&!jQuery.fn.dataTable.KeyTable){r(jQuery,jQuery.fn.dataTable)}})(window,document)