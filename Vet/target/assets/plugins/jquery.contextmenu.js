(function(e){function u(o,u,f){var l=i[o];r=e("#"+l.id).find("ul:first").clone(true);r.css(l.menuStyle).find("li").css(l.itemStyle).hover(function(){e(this).css(l.itemHoverStyle)},function(){e(this).css(l.itemStyle)}).find("img").css({verticalAlign:"middle",paddingRight:"2px"});t.html(r);if(!!l.onShowMenu)t=l.onShowMenu(f,t);e.each(l.bindings,function(n,r){e("#"+n,t).bind("click",function(){a();r(u,s)})});t.css({left:f[l.eventPosX],top:f[l.eventPosY]}).show();if(l.shadow)n.css({width:t.width(),height:t.height(),left:f.pageX+2,top:f.pageY+2}).show();e(document).one("click",a)}function a(){t.hide();n.hide()}var t,n,r,i,s;var o={menuStyle:{listStyle:"none",padding:"1px",margin:"0px",backgroundColor:"#fff",border:"1px solid #999",width:"100px"},itemStyle:{margin:"0px",color:"#000",display:"block",cursor:"default",padding:"3px",border:"1px solid #fff",backgroundColor:"transparent"},itemHoverStyle:{border:"1px solid #0a246a",backgroundColor:"#b6bdd2"},eventPosX:"pageX",eventPosY:"pageY",shadow:true,onContextMenu:null,onShowMenu:null};e.fn.contextMenu=function(r,a){if(!t){t=e('<div id="jqContextMenu"></div>').hide().css({position:"absolute",zIndex:"500"}).appendTo("body").bind("click",function(e){e.stopPropagation()})}if(!n){n=e("<div></div>").css({backgroundColor:"#000",position:"absolute",opacity:.2,zIndex:499}).appendTo("body").hide()}i=i||[];i.push({id:r,menuStyle:e.extend({},o.menuStyle,a.menuStyle||{}),itemStyle:e.extend({},o.itemStyle,a.itemStyle||{}),itemHoverStyle:e.extend({},o.itemHoverStyle,a.itemHoverStyle||{}),bindings:a.bindings||{},shadow:a.shadow||a.shadow===false?a.shadow:o.shadow,onContextMenu:a.onContextMenu||o.onContextMenu,onShowMenu:a.onShowMenu||o.onShowMenu,eventPosX:a.eventPosX||o.eventPosX,eventPosY:a.eventPosY||o.eventPosY});var f=i.length-1;e(this).bind("contextmenu",function(e){var t=!!i[f].onContextMenu?i[f].onContextMenu(e):true;s=e.target;if(t){u(f,this,e);return false}});return this};e.contextMenu={defaults:function(t){e.each(t,function(t,n){if(typeof n=="object"&&o[t]){e.extend(o[t],n)}else o[t]=n})}}})(jQuery);$(function(){$("div.contextMenu").hide()})