$.extend($.jgrid.inlineEdit,{restoreAfterError:false});var easygrid={onSelectGridRowReloadGrid:function(e,t){return function(n){var r=jQuery("#"+e);var i={_search:true};i[t]=n;r.jqGrid("setGridParam",{postData:i});r.trigger("reloadGrid");var s=r.jqGrid("getGridParam","onSelectRow");if(s){s.call(r,-1)}}},filterForm:function(e,t){var n=jQuery(t).serialize();console.log(n);var r=jQuery("#"+e);r.jqGrid("setGridParam",{postData:n});r.trigger("reloadGrid");return false},subGridRowExpanded:function(e){return function(t,n){$.ajax({url:e,data:{id:n,gridId:t+"_row"+n},dataType:"html",success:function(e){jQuery("#"+t).html(e)}})}},onSelectRowInlineEdit:function(e){return function(t){var n=jQuery("#"+e);n.jqGrid("editRow",t,{keys:true,aftersavefunc:easygrid.afterSave(e),errorfunc:easygrid.onError(e)})}},loadError:function(e,t,n){try{jQuery.jgrid.info_dialog(jQuery.jgrid.errors.errcap,'<div class="ui-state-error">'+e.responseText+"</div>",jQuery.jgrid.edit.bClose,{buttonalign:"right"})}catch(r){alert(e.responseText)}},afterSave:function(e){var t=jQuery("#"+e);return function(e,n){var r=jQuery.parseJSON(n.responseText);if(r.hasOwnProperty("version")){var i=t.jqGrid("getRowData",e);i.version=r.version;t.jqGrid("setRowData",e,i)}if(r.hasOwnProperty("id")){var s=$("#"+e);s.attr("id",r.id)}return true}},onError:function(e){var t=jQuery("#"+e);return function(e,n){var r=jQuery.parseJSON(n.responseText);if(r.message!=undefined){jQuery.jgrid.info_dialog(jQuery.jgrid.errors.errcap,'<div class="ui-state-error">'+r.message+"</div>",jQuery.jgrid.edit.bClose,{buttonalign:"right"})}var i=$(t.jqGrid("getRowData",e));var s=t.jqGrid("getGridParam","colModel");for(var o=0;o<s.length;o++){var u=s[o];var a=$("#"+e+"_"+u.name);a.removeClass("ui-state-error")}for(var f in r.fields){var a=$("#"+e+"_"+f);a.parent().attr("title",r.fields[f]);a.addClass("ui-state-error")}}},afterSubmit:function(e){var t=jQuery("#"+e);return function(e,t){var n=null;var r=jQuery.parseJSON(e.responseText);if(r.hasOwnProperty("id")){n=r.id}return[true,"",n]}},errorTextFormat:function(e){var t=jQuery("#"+e);return function(e){var n=jQuery.parseJSON(e.responseText);console.log(n);var r=t.jqGrid("getGridParam","colModel");for(var i=0;i<r.length;i++){var s=r[i];var o=$("#"+s.name);o.removeClass("ui-state-error")}for(var u in n.fields){var o=$("#"+u);o.parent().attr("title",n.fields[u]);o.addClass("ui-state-error")}if(n.message==undefined){return"Invalid values"}return n.message}}}